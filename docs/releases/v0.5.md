# Release v0.5

> 发布日期：2026-03-01

## 本版本包含

- **[DevMind 升级系统与模式可见性改进](../designs/v0.5/upgrade-system-and-mode-display.md)**：引入版本管理系统和智能升级命令，支持无损升级；在每次回复末尾自动显示当前工作模式，提升用户体验

## 核心功能

### 1. 版本管理系统

- 在 `config.yaml` 中添加 `devmind_version` 字段追踪项目版本
- 会话启动时自动检测版本不匹配并提示升级
- 为后续的自动化升级和兼容性检查奠定基础

### 2. 智能升级命令

- 新增 `devmind init --upgrade` 命令
- 智能合并 CLAUDE.md，保留用户自定义内容
- 自动备份原文件为 `.claude/CLAUDE.md.backup`
- 完全更新 Slash 命令和模式文档
- 自动更新版本号到最新

### 3. 模式自动显示

- 在每次回复末尾显示当前 DevMind 模式（📍DevMind: {mode}）
- 无需手动执行命令查询，实时了解工作状态
- 零成本实现，不干扰正常对话流程

### 4. Hook 规范改进

- 使用 exit code 2（而非 1）阻止操作，符合 Claude Code 规范
- 更清晰的语义：阻止操作但不视为错误

## 架构变化

- 新增 `packages/cli/src/commands/upgrade.ts` 模块，负责升级逻辑
- CLAUDE.md 模板引入用户自定义内容分隔符机制
- 配置文件模板添加版本字段

## 已知限制

- 配置文件（config.yaml、flow.yaml）暂不支持智能合并，仅确保文件存在
- 不支持版本回退或指定版本升级
- 备份文件需用户手动确认后删除

## 后续计划

- **v0.6.x**：实现配置文件的字段级智能合并
- **v0.7.x**：支持版本回退和指定版本升级
- **v0.8.x**：自动清理备份文件（在用户确认后）
- **v1.0.x**：完整的迁移和升级向导（交互式 CLI）
