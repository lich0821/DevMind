# Release v0.2.1

> 发布日期：2026-02-26

## 本版本包含

- **[Hook 注册位置修复](../designs/v0.2.1/hook-user-settings-fix.md)**：将 DevMind hooks 从项目级 `.claude/settings.local.json` 迁移至用户级 `~/.claude/settings.json`，使 Explore/Plan 模式的写操作拦截真正生效。

## 架构变化

`devmind init` 新增 `injectUserHooks(projectDir)` 函数，执行时将 PreToolUse/PostToolUse hooks 以绝对路径写入 `~/.claude/settings.json`（幂等，已注册则跳过）。`SETTINGS_LOCAL_JSON` 模板移除 hooks 字段。

根本原因：Claude  Code CLI 源码中 `QJ0()` 函数只从用户级 settings 加载 hooks，项目级 `settings.local.json` 中的 hooks 字段被完全忽略。

## 已知问题 / 后续计划

- 多项目使用时，`~/.claude/settings.json` 会积累各项目的 hook 条目（预期行为，各条目路径独立）
- `devmind migrate` 同样需要调用 `injectUserHooks`，待后续同步修复
